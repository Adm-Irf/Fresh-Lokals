import java.io.*;
import java.util.*;
import java.util.Scanner;

class Product {
    private String category;
    private String name;
    private double price;
    private String description;

    public Product(String category, String name, double price, String description) {
        this.category = category;
        this.name = name;
        this.price = price;
        this.description = description;
    }

    public String getCategory() {
        return category;
    }

    public String getName() {
        return name;
    }

    public double getPrice() {
        return price;
    }

    public String getDescription() {
        return description;
    }

    @Override
    public String toString() {
        return "Category: " + category +
                ", Name: " + name +
                ", Price: $" + price +
                ", Description: " + description;
    }
}

public class FreshLokals {
    public static void main(String[] args) {
        List<Product> products = loadProducts("products.csv");

        Scanner scanner = new Scanner(System.in);

        // Ask user for the category to filter by
        System.out.print("Enter a category to search for (e.g., 'Meat', 'Dairy', etc.): ");
        String categorySearch = scanner.nextLine();
        System.out.println("\nProducts in category '" + categorySearch + "':");
        filterByCategory(products, categorySearch).forEach(System.out::println);

        // Ask user for a search term
        System.out.print("\nEnter a keyword to search for a product: ");
        String keyword = scanner.nextLine();
        System.out.println("\nSearching for products related to '" + keyword + "':");
        searchProducts(products, keyword).forEach(System.out::println);
    }

    // Load products from CSV file
    public static List<Product> loadProducts(String filename) {
        List<Product> products = new ArrayList<>();
        try (BufferedReader br = new BufferedReader(new FileReader(filename))) {
            String line;
            while ((line = br.readLine()) != null) {
                String[] parts = line.split(",", 4); // Split into 4 parts: category, name, price, description
                if (parts.length == 4) {
                    String category = parts[0].trim();
                    String name = parts[1].trim();
                    double price = Double.parseDouble(parts[2].trim());
                    String description = parts[3].trim();
                    products.add(new Product(category, name, price, description));
                }
            }
        } catch (IOException e) {
            System.err.println("Error reading file: " + e.getMessage());
        }
        return products;
    }

    // Search for products by name
    public static List<Product> searchProducts(List<Product> products, String keyword) {
        List<Product> result = new ArrayList<>();
        for (Product product : products) {
            if (product.getName().toLowerCase().contains(keyword.toLowerCase())) {
                result.add(product);
            }
        }
        return result;
    }

    // Filter products by category
    public static List<Product> filterByCategory(List<Product> products, String category) {
        List<Product> result = new ArrayList<>();
        for (Product product : products) {
            if (product.getCategory().equalsIgnoreCase(category)) {
                result.add(product);
            }
        }
        return result;
    }
}
